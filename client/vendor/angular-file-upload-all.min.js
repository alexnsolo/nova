!function(){function e(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])}function t(e,t,n,r,o,s){function u(){return"input"===t[0].tagName.toLowerCase()&&t.attr("type")&&"file"===t.attr("type").toLowerCase()}function f(t){if(!h){h=!0;try{var u=t.__files_||t.target&&t.target.files,f=[],d=[],c=o(n.ngAccept);for(l=0;l<u.length;l++){var p=u.item(l);a(e,c,p,t)?f.push(p):d.push(p)}i(o,s,e,r,n,n.ngFileChange||n.ngFileDrop&&n.ngFileDrop.indexOf("(")>0,f,d,t),0==f.length&&(t.target.value=f)}finally{h=!1}}}function d(r){n.ngMultiple&&r.attr("multiple",o(n.ngMultiple)(e)),o(n.ngMultiple)(e)||r.attr("multiple",void 0),n.accept&&r.attr("accept",n.accept),n.ngCapture&&r.attr("capture",o(n.ngCapture)(e)),n.ngDisabled&&r.attr("disabled",o(n.ngDisabled)(e));for(var i=0;i<t[0].attributes.length;i++){var a=t[0].attributes[i];"type"!==a.name&&"class"!==a.name&&"id"!==a.name&&"style"!==a.name&&r.attr(a.name,a.value)}}function c(){if(!t.attr("disabled")){var e=angular.element('<input type="file">');return d(e),u()?(t.replaceWith(e),t=e):(e.css("display","none").attr("tabindex","-1").attr("__ngf_gen__",!0),t.__ngf_ref_elem__&&t.__ngf_ref_elem__.remove(),t.__ngf_ref_elem__=e,document.body.appendChild(e[0])),e}}function p(t){i(o,s,e,r,n,n.ngFileChange||n.ngFileSelect,[],[],t,!0)}function g(e){function n(){r[0].click(),u()&&(t.bind(_,g),e.preventDefault())}var r=c(e);r&&(r.bind("change",f),p(e),navigator.userAgent.toLowerCase().match(/android/)?setTimeout(function(){n()},0):n())}var h=!1,_="ontouchend"in document?"touchend":"click";window.FileAPI&&window.FileAPI.ngfFixIE?window.FileAPI.ngfFixIE(t,c,d,f,p):t.bind(_,g)}function n(e,t,n,o,s,u,f){function d(e,t,n){var r=!0,i=n.dataTransfer.items;if(null!=i)for(l=0;l<i.length&&r;l++)r=r&&("file"==i[l].kind||""==i[l].kind)&&a(e,m,i[l],n);var o=s(t.dragOverClass)(e,{$event:n});return o&&(o.delay&&(v=o.delay),o.accept&&(o=r?o.accept:o.reject)),o||t.dragOverClass||"dragover"}function c(t,n,r,i){function o(n){a(e,m,n,t)?l.push(n):d.push(n)}function s(e,t,n){if(null!=t)if(t.isDirectory){var r=(n||"")+t.name;o({name:t.name,type:"directory",path:r});var i=t.createReader(),a=[];p++;var l=function(){i.readEntries(function(r){try{if(r.length)a=a.concat(Array.prototype.slice.call(r||[],0)),l();else{for(g=0;g<a.length;g++)s(e,a[g],(n?n:"")+t.name+"/");p--}}catch(i){p--,console.error(i)}},function(){p--})};l()}else p++,t.file(function(e){try{p--,e.path=(n?n:"")+e.name,o(e)}catch(t){p--,console.error(t)}},function(){p--})}var l=[],d=[],c=t.dataTransfer.items,p=0;if(c&&c.length>0&&"file"!=f.protocol())for(var g=0;g<c.length;g++){if(c[g].webkitGetAsEntry&&c[g].webkitGetAsEntry()&&c[g].webkitGetAsEntry().isDirectory){var h=c[g].webkitGetAsEntry();if(h.isDirectory&&!r)continue;null!=h&&s(l,h)}else{var _=c[g].getAsFile();null!=_&&o(_)}if(!i&&l.length>0)break}else{var v=t.dataTransfer.files;if(null!=v)for(var g=0;g<v.length&&(o(v.item(g)),i||!(l.length>0));g++);}var y=0;!function A(e){u(function(){if(p)10*y++<2e4&&A(10);else{if(!i&&l.length>1){for(g=0;"directory"==l[g].type;)g++;l=[l[g]]}n(l,d)}},e||0)}()}var p=r();if(n.dropAvailable&&u(function(){e[n.dropAvailable]?e[n.dropAvailable].value=p:e[n.dropAvailable]=p}),!p)return void(1==s(n.hideOnDropNotAvailable)(e)&&t.css("display","none"));var g,h=null,_=s(n.stopPropagation),v=1,m=s(n.ngAccept),y=s(n.ngDisabled);t[0].addEventListener("dragover",function(r){if(!y(e)){if(r.preventDefault(),_(e)&&r.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var i=r.dataTransfer.effectAllowed;r.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy"}u.cancel(h),e.actualDragOverClass||(g=d(e,n,r)),t.addClass(g)}},!1),t[0].addEventListener("dragenter",function(t){y(e)||(t.preventDefault(),_(e)&&t.stopPropagation())},!1),t[0].addEventListener("dragleave",function(){y(e)||(h=u(function(){t.removeClass(g),g=null},v||1))},!1),t[0].addEventListener("drop",function(r){y(e)||(r.preventDefault(),_(e)&&r.stopPropagation(),t.removeClass(g),g=null,c(r,function(t,a){i(s,u,e,o,n,n.ngFileChange||n.ngFileDrop&&n.ngFileDrop.indexOf("(")>0,t,a,r)},0!=s(n.allowDir)(e),n.multiple||s(n.ngMultiple)(e)))},!1)}function r(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e}function i(e,t,n,r,i,a,o,s,l,u){function f(){r&&(e(i.ngModel).assign(n,o),t(function(){r&&r.$setViewValue(null!=o&&0==o.length?null:o)})),i.ngModelRejected&&e(i.ngModelRejected).assign(n,s),a&&e(a)(n,{$files:o,$rejectedFiles:s,$event:l})}u?f():t(function(){f()})}function a(e,t,n,r){var i=t(e,{$file:n,$event:r});if(null==i)return!0;if(angular.isString(i)){var a=new RegExp(o(i),"gi");i=null!=n.type&&n.type.match(a)||null!=n.name&&n.name.match(a)}return i}function o(e){if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])return e.substring(1,e.length-1);var t=e.split(","),n="";if(t.length>1)for(l=0;l<t.length;l++)n+="("+o(t[l])+")",l<t.length-1&&(n+="|");else 0==e.indexOf(".")&&(e="*"+e),n="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",n=n.replace(/\\\*/g,".*").replace(/\\\?/g,".");return n}var s,l;window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&e("setRequestHeader",function(e){return function(t,n){if("__setXHR_"===t){var r=n(this);r instanceof Function&&r(this)}else e.apply(this,arguments)}});var u=angular.module("angularFileUpload",[]);u.version="3.3.3",u.service("$upload",["$http","$q","$timeout",function(e,t,n){function r(r){r.method=r.method||"POST",r.headers=r.headers||{},r.transformRequest=r.transformRequest||function(t,n){return window.ArrayBuffer&&t instanceof window.ArrayBuffer?t:e.defaults.transformRequest[0](t,n)};var i=t.defer(),a=i.promise;return r.headers.__setXHR_=function(){return function(e){e&&(r.__XHR=e,r.xhrFn&&r.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=r,i.notify?i.notify(e):a.progress_fn&&n(function(){a.progress_fn(e)})},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=r,i.notify?i.notify(e):a.progress_fn&&n(function(){a.progress_fn(e)}))},!1))}},e(r).then(function(e){i.resolve(e)},function(e){i.reject(e)},function(e){i.notify(e)}),a.success=function(e){return a.then(function(t){e(t.data,t.status,t.headers,r)}),a},a.error=function(e){return a.then(null,function(t){e(t.data,t.status,t.headers,r)}),a},a.progress=function(e){return a.progress_fn=e,a.then(null,null,function(t){e(t)}),a},a.abort=function(){return r.__XHR&&n(function(){r.__XHR.abort()}),a},a.xhr=function(e){return r.xhrFn=function(t){return function(){t&&t.apply(a,arguments),e.apply(a,arguments)}}(r.xhrFn),a},a}this.upload=function(e){return e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(t){var n=new FormData,r={};for(s in e.fields)e.fields.hasOwnProperty(s)&&(r[s]=e.fields[s]);if(t&&(r.data=t),e.formDataAppender)for(s in r)r.hasOwnProperty(s)&&e.formDataAppender(n,s,r[s]);else for(s in r)if(r.hasOwnProperty(s)){var i=r[s];void 0!==i&&(angular.isDate(i)&&(i=i.toISOString()),angular.isString(i)?n.append(s,i):e.sendObjectsAsJsonBlob&&angular.isObject(i)?n.append(s,new Blob([i],{type:"application/json"})):n.append(s,JSON.stringify(i)))}if(null!=e.file){var a=e.fileFormDataName||"file";if(angular.isArray(e.file)){var o=angular.isString(a);for(l=0;l<e.file.length;l++)n.append(o?a:a[l],e.file[l],e.fileName&&e.fileName[l]||e.file[l].name)}else n.append(a,e.file,e.fileName||e.file.name)}return n}),r(e)},this.http=function(e){return r(e)}}]),u.directive("ngFileSelect",["$parse","$timeout","$compile",function(e,n,r){return{restrict:"AEC",require:"?ngModel",link:function(i,a,o,s){t(i,a,o,s,e,n,r)}}}]),u.directive("ngFileDrop",["$parse","$timeout","$location",function(e,t,r){return{restrict:"AEC",require:"?ngModel",link:function(i,a,o,s){n(i,a,o,s,e,t,r)}}}]),u.directive("ngNoFileDrop",function(){return function(e,t){r()&&t.css("display","none")}}),u.directive("ngFileDropAvailable",["$parse","$timeout",function(e,t){return function(n,i,a){if(r()){var o=e(a.ngFileDropAvailable);t(function(){o(n)})}}}]);var f=angular.module("ngFileUpload",[]);for(s in u)u.hasOwnProperty(s)&&(f[s]=u[s])}(),function(){function e(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])}function t(e,t,n){try{Object.defineProperty(e,t,{get:n})}catch(r){}}function n(e){return"input"===e[0].tagName.toLowerCase()&&e.attr("type")&&"file"===e.attr("type").toLowerCase()}var r=function(){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(e)return!0}catch(t){if(void 0!=navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1};if(window.XMLHttpRequest&&!window.FormData||window.FileAPI&&FileAPI.forceLoad){var i=function(e){if(!e.__listeners){e.upload||(e.upload={}),e.__listeners=[];var t=e.upload.addEventListener;e.upload.addEventListener=function(n,r){e.__listeners[n]=r,t&&t.apply(this,arguments)}}};e("open",function(e){return function(t,n,r){i(this),this.__url=n;try{e.apply(this,[t,n,r])}catch(a){a.message.indexOf("Access is denied")>-1&&(this.__origError=a,e.apply(this,[t,"_fix_for_ie_crossdomain__",r]))}}}),e("getResponseHeader",function(e){return function(t){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(t):null==e?null:e.apply(this,[t])}}),e("getAllResponseHeaders",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==e?null:e.apply(this)}}),e("abort",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==e?null:e.apply(this)}}),e("setRequestHeader",function(e){return function(t,n){if("__setXHR_"===t){i(this);var r=n(this);r instanceof Function&&r(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[t]=n,e.apply(this,arguments)}}),e("send",function(e){return function(){var n=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var i=arguments[0],a={url:n.__url,jsonp:!1,cache:!0,complete:function(e,r){n.__completed=!0,!e&&n.__listeners.load&&n.__listeners.load({type:"load",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),!e&&n.__listeners.loadend&&n.__listeners.loadend({type:"loadend",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),"abort"===e&&n.__listeners.abort&&n.__listeners.abort({type:"abort",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),void 0!==r.status&&t(n,"status",function(){return 0==r.status&&e&&"abort"!==e?500:r.status}),void 0!==r.statusText&&t(n,"statusText",function(){return r.statusText}),t(n,"readyState",function(){return 4}),void 0!==r.response&&t(n,"response",function(){return r.response});var i=r.responseText||(e&&0==r.status&&"abort"!==e?e:void 0);t(n,"responseText",function(){return i}),t(n,"response",function(){return i}),e&&t(n,"err",function(){return e}),n.__fileApiXHR=r,n.onreadystatechange&&n.onreadystatechange(),n.onload&&n.onload()},fileprogress:function(e){if(e.target=n,n.__listeners.progress&&n.__listeners.progress(e),n.__total=e.total,n.__loaded=e.loaded,e.total===e.loaded){var t=this;setTimeout(function(){n.__completed||(n.getAllResponseHeaders=function(){},t.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:n.__requestHeaders};a.data={},a.files={};for(var o=0;o<i.data.length;o++){var s=i.data[o];null!=s.val&&null!=s.val.name&&null!=s.val.size&&null!=s.val.type?a.files[s.key]=s.val:a.data[s.key]=s.val}setTimeout(function(){if(!r())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.__fileApiXHR=FileAPI.upload(a)},1)}else{if(this.__origError)throw this.__origError;e.apply(n,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,FileAPI.ngfFixIE=function(e,t,i,a){if(!r())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var o=function(){function r(e){var t,n;if(t=n=0,e.offsetParent)do t+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent);return{left:t,top:n}}if(e.attr("disabled"))e.__ngf_elem__.removeClass("js-fileapi-wrapper");else{var l=e.__ngf_elem__;l?i(e.__ngf_elem__):(l=e.__ngf_elem__=t(),l.addClass("js-fileapi-wrapper"),!n(e),setTimeout(function(){l.bind("mouseenter",o)},10),l.bind("change",function(e){s.apply(this,[e]),a.apply(this,[e])})),n(e)||l.css("position","absolute").css("top",r(e[0]).top+"px").css("left",r(e[0]).left+"px").css("width",e[0].offsetWidth+"px").css("height",e[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",e.css("display")).css("overflow","hidden").css("z-index","900000")}};e.bind("mouseenter",o);var s=function(e){for(var t=FileAPI.getFiles(e),n=0;n<t.length;n++)void 0===t[n].size&&(t[n].size=0),void 0===t[n].name&&(t[n].name="file"),void 0===t[n].type&&(t[n].type="undefined");e.target||(e.target={}),e.target.files=t,e.target.files!=t&&(e.__files_=t),(e.__files_||e.target.files).item=function(t){return(e.__files_||e.target.files)[t]||null}}},window.FormData=FormData=function(){return{append:function(e,t,n){t.__isFileAPIBlobShim&&(t=t.data[0]),this.data.push({key:e,val:t,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(e){return{data:e,__isFileAPIBlobShim:!0}},function(){if(window.FileAPI||(window.FileAPI={}),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var e,t,n,i,a,o=document.createElement("script"),s=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)e=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)t=window.FileAPI.jsPath;else for(n=0;n<s.length;n++)if(a=s[n].src,i=a.search(/\/angular\-file\-upload[\-a-zA-z0-9\.]*\.js/),i>-1){t=a.substring(0,i+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=t),o.setAttribute("src",e||t+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(o),FileAPI.hasFlash=r()}}(),FileAPI.disableFileInput=function(e,t){t?e.removeClass("js-fileapi-wrapper"):e.addClass("js-fileapi-wrapper")}}window.FileReader||(window.FileReader=function(){var e=this,t=!1;this.listeners={},this.addEventListener=function(t,n){e.listeners[t]=e.listeners[t]||[],e.listeners[t].push(n)},this.removeEventListener=function(t,n){e.listeners[t]&&e.listeners[t].splice(e.listeners[t].indexOf(n),1)},this.dispatchEvent=function(t){var n=e.listeners[t.type];if(n)for(var r=0;r<n.length;r++)n[r].call(e,t)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(t,n){var r={type:t,target:e,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(r.target.result=n.result),r},r=function(r){if(t||(t=!0,e.onloadstart&&e.onloadstart(n("loadstart",r))),"load"===r.type){e.onloadend&&e.onloadend(n("loadend",r));var i=n("load",r);e.onload&&e.onload(i),e.dispatchEvent(i)}else if("progress"===r.type){var i=n("progress",r);e.onprogress&&e.onprogress(i),e.dispatchEvent(i)}else{var i=n("error",r);e.onerror&&e.onerror(i),e.dispatchEvent(i)}};this.readAsArrayBuffer=function(e){FileAPI.readAsBinaryString(e,r)},this.readAsBinaryString=function(e){FileAPI.readAsBinaryString(e,r)},this.readAsDataURL=function(e){FileAPI.readAsDataURL(e,r)},this.readAsText=function(e){FileAPI.readAsText(e,r)}})}();
