!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery.cloudinary","angular"],t):t(window.jQuery,angular)}(function(t,r){var n=r.module("cloudinary",[]),i=function(t){return t.match(/cl[A-Z]/)&&(t=t.substring(2)),t.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()};["Src","Srcset","Href"].forEach(function(r){var e="cl"+r;r=r.toLowerCase(),n.directive(e,["$sniffer",function(n){return{priority:99,link:function(o,a,c){var u=r,f=r;"href"===r&&"[object SVGAnimatedString]"===toString.call(a.prop("href"))&&(f="xlinkHref",c.$attr[f]="xlink:href",u=null),c.$observe(e,function(r){if(r){var e={};t.each(a[0].attributes,function(){e[i(this.name)]=this.value}),r=t.cloudinary.url(r,e),c.$set(f,r),n.msie&&u&&a.prop(u,c[f])}})}}}])}),n.directive("clTransformation",[function(){return{restrict:"E",transclude:!1,require:"^clImage",link:function(r,n,e,o){var a={};t.each(e,function(t,r){"$"!==t[0]&&(a[i(t)]=r)}),o.addTransformation(a)}}}]),n.directive("clImage",[function(){var r=function(t){this.addTransformation=function(r){t.transformations=t.transformations||[],t.transformations.push(r)}};return r.$inject=["$scope"],{restrict:"E",replace:!0,transclude:!0,template:"<img ng-transclude/>",scope:{},priority:99,controller:r,link:function(r,n,e){var o={},a=null;t.each(e,function(t,r){o[i(t)]=r}),r.transformations&&(o.transformation=r.transformations),e.$observe("publicId",function(t){t&&(a=t,c())}),e.$observe("version",function(t){t&&(o.version=t,c())}),e.htmlWidth?n.attr("width",e.htmlWidth):n.removeAttr("width"),e.htmlHeight?n.attr("height",e.htmlHeight):n.removeAttr("height");var c=function(){var r=t.cloudinary.url(a,o);n.attr("src",r)}}}}])});
